<!doctype html>
<html lang="zh_cn">
    <head>
        <title>喜迎元旦-高一十四班春节联欢晚会</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"> -->
        
        <!-- Bootstrap JavaScript Libraries -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/mhDoLbDldZc3qpsJHpLogda//BVZbgYuw6kof4u2FrCedxOtgRZDTHgHUhOCVim" crossorigin="anonymous"></script> -->
        <!-- 新 Bootstrap5 核心 CSS 文件 -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css">
 
        <!-- 最新的 Bootstrap5 核心 JavaScript 文件 -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
        
        <link rel="stylesheet" type="text/css" href="./activity_assets/AaDarkAbyssChinese.css">
        <link rel="stylesheet" type="text/css" href="./activity_assets/YuWeiShuFa.css">
        <link rel="stylesheet" type="text/css" href="./activity_assets/general_node.css">
        <link rel="stylesheet" type="text/css" href="./activity_assets/appearance.css">
        
        <script>
            var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
            var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
                return new bootstrap.Popover(popoverTriggerEl)
            })
        </script>

        <script>
            var toastContainer; 
            var toasts = new Map();
            function initalizeToastContainer() { 
                toastContainer = document.createElement("div"); 
                toastContainer.className += "card-body toast-container d-flex justify-content-start align-items-end"; 
                toastContainer.ariaLive = "polite"; 
                toastContainer.ariaAtomic = "true"; 
                toastContainer.style.position = "fixed"; 
                document.getElementById("toastContainer").appendChild(toastContainer); 
            } 
            function createToast(name, id, text) { 
                let tst = document.createElement("div"); 
                tst.className += "toast"; 
                tst.role = "alert"; 
                tst.ariaLive = "assertive"; 
                tst.ariaAtomic = "true"; 
                toastContainer.appendChild(tst); 
                let tstheader = document.createElement("div"); 
                tstheader.className += "toast-header"; 
                tst.appendChild(tstheader); 
                let tstname = document.createElement("strong"); 
                tstname.className += "me-auto"; 
                tstname.innerText = name; 
                tstheader.appendChild(tstname); 
                let cbtn = document.createElement("button"); 
                cbtn.type = "button"; 
                cbtn.className += "ms-2 mb-1 close btn-close"; 
                cbtn.dataset.bsDismiss = "toast"; 
                cbtn.ariaLabel = "Close"; 
                tstheader.appendChild(cbtn); 
                let tstbody = document.createElement("div"); 
                tstbody.className += "toast-body"; 
                tstbody.innerText = text; tst.appendChild(tstbody); 
                toasts.set(id, new bootstrap.Toast(tst)); 
            } 
            function showToast(id) { 
                toasts.get(id).show(); 
            }
            function delToast(id) { 
                toasts.get(id)._element.remove(); 
                toasts.get(id).dispose(); 
                toasts.delete(id); 
            } 
            function addDELcallback(id) { 
                toasts.get(id)._element.getElementsByClassName("close")[0].addEventListener(
                    onclick, 
                    () => { delToast(id) }
                ) 
            } 
            function createAndShowToast(name, id, text) { 
                createToast(name, id, text); 
                addDELcallback(id); 
                showToast(id); 
            } 
            addEventListener("load", initalizeToastContainer); 
            addEventListener("load", (ev) => { 
                // createToast("Toast", "Toast::toast_text", "Loaded Successfully"); 
                // showToast("Toast::toast_text"); 
            });
            var toast_id = 1024; 
            function getNextId() { 
                toast_id++; return toast_id.toString(10); 
            } 
            function Toast(name, text) { createAndShowToast(name, getNextId(), text); }
        </script>

        <script>
            addEventListener(
                "load",(ev)=>{
                    Toast("HappyNewYear","元旦快乐")
                    setTimeout(()=>{document.getElementById("Schedule").scrollIntoView()},3000);
                }
            )
        </script>

        <script>
            // Game Utils
            var tickets = [
                "38套*1","奶茶*1","课上回答不出来可坐下*1",
                "38套*1","奶茶*1","课上回答不出来可坐下*1",
                "找异性唱歌*2",
                "抱同性转圈*1",
                "站在窗台边上大喊元旦快乐*1",
                "找班主任说我爱你*1"
            ]

            var ticket_history = [
                0,0,0,
                0,0,0,
                0,
                0,
                0,
                0
            ]

            function getNextTicket(try_flag=false){
                let i = Math.floor(Math.random() * tickets.length)
                let cnt = -1;
                while(true){
                    i = Math.floor(Math.random() * tickets.length)
                    cnt += 1
                    if(ticket_history[i]==0)break
                    let j = i
                    while(i==j)i = Math.floor(Math.random() * tickets.length)
                    if(cnt>(tickets.length+2)){
                        let ssflag=false
                        ticket_history.forEach(
                            (value,index)=>{
                                if(!value){ssflag=true;i=index;}
                            }
                        )
                        if(ssflag)break
                        if(try_flag)return false
                        return "签抽完了..."
                    }
                }
                if(try_flag)return true
                ticket_history[i]=1
                return tickets[i]
            }
            
            function playTicketAnimation(ticket_message){
                Toast("抽签",ticket_message)
                document.getElementById("qian-content").innerText=ticket_message
                document.getElementById("qian").hidden=false
                document.getElementById("qian").style.animation = "fading 1s"
            }

            function getTicket(){
                if(!getNextTicket(true)){
                    Toast("抽签","签抽完了......")
                    return
                }
                playTicketAnimation(getNextTicket(false))
            }

        </script>

        <script>
            // 节目单
            var schedules = [
                "Test"
            ]
            var now_schedule = 0
            function initSchedules(){
                schedules.forEach(
                    (value)=>{
                        var nav_node = "<a class=\"dropdown-item\" href=\"#Schedule\">"+value+"</a>"
                        document.getElementById("schedules-dropdown-menu").innerHTML+=nav_node
                        var list_node = '<label class="list-group-item"><input class="form-check-input me-1" type="checkbox" value="" />'+value+'</label>'
                        document.getElementById("schedules-list").innerHTML+=list_node
                    }
                )
            }
            function selectNextSchedule(){
                if(now_schedule<0)now_schedule=0
                if(now_schedule>=schedules.length){
                    Toast("节目单","已经是最后一个节目了")
                    return
                }
                document.getElementById("now-schedule").innerText = schedules[now_schedule]
                now_schedule++
            }
            addEventListener(
                "load",initSchedules
            )
        </script>

        <script>
            // // 滚动监听
            // var scroll_tag = [
            //     "Top",
            //     "Schedule",
            //     "Games",
            //     "Thanks"
            // ]
            // var scroll_pos = 0
            // addEventListener(
            //     "load",()=>{
            //         document.getRootNode().addEventListener(
            //             "scroll",(ev)=>{
            //                 if(scroll_pos<=0){
            //                     scroll_pos=0
            //                     return
            //                 }
            //                 if(scroll_pos>=scroll_tag.length-1){
            //                     scroll_pos=scroll_tag.length-1
            //                     return
            //                 }
            //                 var scroll_dire = window.scrollY>0?1:-1
            //                 scroll_pos+=scroll_dire
            //                 document.getElementById(scroll_tag[scroll_pos]).scrollIntoView()
            //                 console.log(window.scrollY)
            //             }
            //         )
            //     }
            // )
        </script>

    </head>

    <body class="bg-dark text-white-50" style="font-family: 'AaDarkAbyssChinese', sans-serif;">
        <header class="bg-info text-dark">
            <!-- place navbar here -->
             <nav
                class="main-body navbar navbar-expand-sm navbar-light bg-light"
                style="position: fixed; top: 0; min-width: 100%; z-index: 114514; opacity: 0.75; display: flex;"
             >
                <div class="container">
                    <a class="navbar-brand" href="#" style="font-family: 'AaDarkAbyssChinese', sans-serif;">喜迎元旦-高一十四班春节联欢晚会</a>
                    <button
                        class="navbar-toggler d-lg-none"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapsibleNavId"
                        aria-controls="collapsibleNavId"
                        aria-expanded="false"
                        aria-label="Toggle navigation"
                    >
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="collapsibleNavId">
                        <ul class="navbar-nav me-auto mt-2 mt-lg-0">
                            <li class="nav-item">
                                <a class="nav-link active" href="#" aria-current="page"
                                    >回到顶部
                                    <span class="visually-hidden">(current)</span></a
                                >
                            </li>
                            <li class="nav-item dropdown">
                                <a
                                    class="nav-link dropdown-toggle"
                                    href="#Schedule"
                                    id="dropdownId"
                                    data-bs-toggle="dropdown"
                                    aria-haspopup="true"
                                    aria-expanded="false"
                                    >节目</a
                                >
                                <div
                                    class="dropdown-menu"
                                    id="schedules-dropdown-menu"
                                    aria-labelledby="dropdownId"
                                >
                                    <!-- <a class="dropdown-item" href="#Schedule"
                                        >？然而事实是做完是在2025.12.31 01:42:56此时还没有节目单()</a
                                    >
                                    <a class="dropdown-item" href="#Schedule"
                                        >？然而事实是做完是在2025.12.31 01:42:56此时还没有节目单()</a
                                    > -->
                                </div>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#Games">小游戏</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#Thanks">致谢</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="https://yzzs2028.rasta.top/">想要放歌？</a>
                            </li>
                        </ul>
                    </div>
                </div>
             </nav>
             <div class="toastContainer main-body" id="toastContainer" style="position: fixed; top:0; z-index: 114515;">

             </div>
             
        </header>

        <main class="bg-info text-dark main-bg"  style="background-image: url(./activity_assets/background1.png); padding-bottom: 5em;">
            <div style="min-height: 45em;"></div>

            <div id="main-body" class="main-body card bg-light" style="margin-left: 5em; margin-right: 5em; padding-bottom: 30em;">
                <div class="card-body">
                    <h2 class="card-title text-center" style="font-family: 'AaDarkAbyssChinese', sans-serif;">喜迎元旦-高一十四班春节联欢晚会</h2>
                    <p class="card-text text-center">2025.12.31</p>
                    
                    <style>
                        .scrollspy {
                            min-height: 100vh;
                        }
                    </style>
                    <!-- Ids in the navbar a-href and ids in the content should match-->
                    
                    <div style="position: relative;" data-bs-spy="scroll" data-bs-target="navbar" data-bs-smooth-scroll="true" data-bs-offset=50> 
                        
                        <div class="scrollspy" id="Schedule">
                            <div class="nav nav-tabs" role="tablist" style="min-width: 75vw;">
                                <div class="place-holder">
                                <hr>
                                <h1>节目</h1>
                                <div id="schedules-list" class="list-group" style="min-width: 100%;">
                                    <!-- <label class="list-group-item">
                                        <input class="form-check-input me-1" type="checkbox" value="" />
                                        First checkbox
                                    </label> -->
                                </div>
                                <div>
                                    <div style="width:80vw;">-</div>
                                    <h1 id="now-schedule" style="font-size: 5vw; display: block; min-width: 100%;">
                                        等待开始
                                    </h1>
                                </div>
                                <button class="btn btn-primary" onclick="selectNextSchedule()">下一个节目</button>
                                <br>
                                <!-- <div id="ScheduleList">？然而事实是做完是在2025.12.31 01:42:56此时还没有节目单()</div> -->
                                </div>
                            </div>
                        </div>

                        <div class="scrollspy" id="Games">
                            <div class="nav nav-tabs place-holder" style="display: block;" role="tablist">
                                <div style="padding-top:5em;"><hr></div>
                                <h1>小游戏环节</h1><br>
                                <div class="card border-primary">
                                    <div class="card-body">
                                        <h5 calss="card-title">游戏规则</h5>
                                        抽签：玩家通过按下下方的“抽签”按钮随机抽签，然后需按照签上内容行动（有奖励也有惩罚）
                                        <div class="place-holder"></div>
                                        <div class="center"> 
                                            <button class="btn btn-primary" onclick="getTicket()">抽签
                                            </button>
                                            <!-- <div id="qian" style="display:inline; position: fixed; top:0%; left: 0%; width: 100vw; height: 100vh; z-index: 114520; background-color: darkgray;"><img
                                                src="./activity_assets/qian.png"
                                                class="img-fluid rounded-top"
                                                alt=""
                                                onclick="document.getElementById('qian').hidden=true"
                                                style="display: flex; left:cal((100%-width)/2);"
                                            /><h1 id="qian-content" style="font-size: 10vh; height: 75vh; width: 100vh;" class="text-center"></h1></div> -->
                                            <div id="qian" hidden style="display: flex; flex-direction: column; align-items: center; justify-content: center; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 114520; background-color: darkgray;">
    <div style="position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center;">
        <img
            src="./activity_assets/qian.png"
            class="img-fluid rounded-top"
            alt=""
            onclick="document.getElementById('qian').hidden=true"
            style="max-width: 80vw; max-height: 60vh; object-fit: contain;"
        />
        <h1 id="qian-content" style="font-size: 10vh; margin-top: 2vh; text-align: center;"></h1>
    </div>
</div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        </div>

                        <div class="scrollspy" id="Thanks">
                            <div class="nav nav-tabs" role="tablist">
                                <div class="place-holder">
                                    
                                    <hr>
                                    <h1>特别鸣谢</h1>
                                    <br>
                                    <!-- <h2>[2025.12.31 1:44:12]请有关人员报下名字要加到鸣谢上（</h2> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    
                    <script>
                        // var scrollSpy = new bootstrap.ScrollSpy(document.body, {
                        //   target: '#navId'
                        // })
                        var scrollSpys = []
                        var spys = document.getElementsByClassName("scrollspy")
                        for (let index = 0; index < spys.length; index++) {
                            const element = spys.item(index);
                            scrollSpys.push(new bootstrap.ScrollSpy(document.body, {target: "#" + element.id}))
                        }
                    </script>

                </div>
            </div>
            
        </main>
        <hr/>
        <footer class="bg-dark text-white-50">
            <!-- place footer here -->
        </footer>
        <hr/>
        <div class="end bg-dark" style="min-height: 1em;"></div>
    </body>
</html>
